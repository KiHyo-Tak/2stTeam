DROP SEQUENCE ORDERS_SQ;
DROP TABLE ORDERS;
DROP SEQUENCE MEMBER_COUPON_SQ;
DROP TABLE MEMBER_COUPON;
DROP SEQUENCE COUPON_SQ;
DROP TABLE COUPON;
DROP SEQUENCE NOTICE_SQ;
DROP TABLE NOTICE;
DROP SEQUENCE ADMIN_QNA_SEQ;
DROP SEQUENCE ADMIN_QNA_SQ;
DROP TABLE ADMIN_QNA;
DROP SEQUENCE LIKE_ACTIVITY_SQ;
DROP TABLE LIKE_ACTIVITY;
DROP SEQUENCE QNA_SQ;
DROP TABLE QNA;
DROP SEQUENCE REVIEW_LIKE_SQ;
DROP TABLE REVIEW_LIKE;
DROP SEQUENCE REVIEW_SQ;
DROP TABLE REVIEW;
DROP SEQUENCE LIKE_HOST_SQ;
DROP TABLE LIKE_HOST;
DROP SEQUENCE LIKE_CATEGORY_SQ;
DROP TABLE LIKE_CATEGORY;
DROP SEQUENCE ACTIVITY_RESERVE_SQ;
DROP TABLE ACTIVITY_RESERVE;
DROP SEQUENCE ACTEVENTDATE_SQ;
DROP TABLE ACTEVENTDATE;
DROP SEQUENCE ACTIVITY_SQ;
DROP TABLE ACTIVITY;
DROP SEQUENCE ACTIVITY_CATEGORY_SQ;
DROP TABLE ACTIVITY_CATEGORY;
DROP TABLE HOST;
DROP TABLE ADMIN;
DROP TABLE MEMBER;
DROP SEQUENCE HOST_JOIN_SQ;
----------------------------------------
---            멤버 관련              ---
----------------------------------------
CREATE TABLE MEMBER( 
    mID      VARCHAR2(50),
    mPW      VARCHAR2(50)  NOT NULL,
    mNAME    VARCHAR2(50)  NOT NULL,
    mPHONE   VARCHAR2(100) NOT NULL,
    mEMAIL   VARCHAR2(100) NOT NULL,
    mPOST    VARCHAR2(50),
    mADDRESS VARCHAR2(1000),
    mBIRTH   DATE,
    mRDATE   DATE DEFAULT SYSDATE NOT NULL,
    mImg     VARCHAR2(1000),
    PRIMARY KEY(mID)
);
----------------------------------------
---            호스트 관련            ---
----------------------------------------
CREATE SEQUENCE  HOST_JOIN_SQ MAXVALUE 999 NOCACHE NOCYCLE;

CREATE TABLE HOST(
    hID VARCHAR2(50) PRIMARY KEY,
    hPW VARCHAR2(50) NOT NULL,
    hNAME VARCHAR2(50) NOT NULL,
    hPHONE VARCHAR2(100) NOT NULL,
    hEMAIL VARCHAR2(100) NOT NULL,
    hPhoto VARCHAR2(4000),
    hRDATE DATE DEFAULT SYSDATE NOT NULL,
    hBLACK NUMBER(1) DEFAULT 0 NOT NULL,
    hPOST VARCHAR2(50),
    hADDRESS VARCHAR2(4000),
    hCNTLIKE NUMBER(4) DEFAULT 0 NOT NULL
);

CREATE TABLE LIKE_HOST(
    lhID NUMBER(7) PRIMARY KEY,
    mID VARCHAR2(50) REFERENCES MEMBER(mID),
    hID VARCHAR2(50) REFERENCES HOST(hID)
);

CREATE SEQUENCE LIKE_HOST_SQ MAXVALUE 9999999 NOCYCLE NOCACHE;

----------------------------------------
---          Admin Q&A 관련          ---
----------------------------------------
CREATE TABLE ADMIN_QNA(
    qID NUMBER(7) PRIMARY KEY,
    qTITLE VARCHAR2(100) NOT NULL,
    qWRITER VARCHAR2(50) NOT NULL,
    qPW VARCHAR2(50),
    qCONTENT CLOB,
    qFILE VARCHAR2(4000),
    qGROUP NUMBER(3) NOT NULL,
    qSTEP NUMBER(3) NOT NULL,
    qINDENT NUMBER(3) NOT NULL,
    qRDATE DATE DEFAULT SYSDATE,
    qIP VARCHAR2(100) NOT NULL,
    qHIT NUMBER(7) DEFAULT 0
);


CREATE SEQUENCE ADMIN_QNA_SQ MAXVALUE 9999999 NOCACHE NOCYCLE;

----------------------------------------
---          Admin 관련          ---
----------------------------------------
CREATE TABLE ADMIN(
    aID VARCHAR2(50) PRIMARY KEY, 
    aNAME VARCHAR2(50) NOT NULL,
    aPW VARCHAR2(50) NOT NULL
);

----------------------------------------
---   Activity & coupon 관련          ---
----------------------------------------

CREATE SEQUENCE COUPON_SQ -- 쿠폰 시퀀스
    MAXVALUE 9999999
    NOCYCLE
    NOCACHE;

CREATE TABLE COUPON ( -- 쿠폰 테이블
    cID       NUMBER(7),
    cNAME     VARCHAR2(50),
    cDISCOUNT NUMBER(3) DEFAULT 0,
    PRIMARY KEY(cID)
);

CREATE SEQUENCE MEMBER_COUPON_SQ -- 멤버 쿠폰 시퀀스
    MAXVALUE 9999999
    NOCYCLE
    NOCACHE;

CREATE TABLE MEMBER_COUPON ( -- 멤버 쿠폰 테이블
    mcNO NUMBER(7),
    mID  VARCHAR2(50),
    cID  NUMBER(7),
    PRIMARY KEY(mcNO),
    FOREIGN KEY(mID) REFERENCES MEMBER(mID),
    FOREIGN KEY(cID) REFERENCES COUPON(cID)
);

CREATE SEQUENCE ACTIVITY_CATEGORY_SQ -- 액티비티 카테고리 시퀀스
    MAXVALUE 99999
    NOCYCLE
    NOCACHE;

CREATE TABLE ACTIVITY_CATEGORY ( -- 액티비티 카테고리 테이블
    actCNO NUMBER(5),
    actCATEGORY VARCHAR2(50) NOT NULL,
    actCATEGORY2 VARCHAR2(50) NOT NULL,
    actCATEGORY3 VARCHAR2(50) NOT NULL,
    actCATEGORY4 VARCHAR2(50) NOT NULL,
    actCATEGORY5 VARCHAR2(50),
    PRIMARY KEY(actCNO)
);

CREATE SEQUENCE ACTIVITY_SQ -- 액티비티 시퀀스
    MAXVALUE 9999999
    NOCYCLE
    NOCACHE;

CREATE TABLE ACTIVITY ( -- 액티비티 테이블
    actID        NUMBER(7),                 -- 액티비티 아이디
    actNAME      VARCHAR2(100) NOT NULL,    -- 액티비티 이름
    actIMG       VARCHAR2(4000) NOT NULL,   -- 액티비티 대표이미지
    actINFO      CLOB NOT NULL,             -- 액티비티 소개글
    actADDRESS1  VARCHAR2(10) NOT NULL,     -- 액티비티 우편번호
    actADDRESS2  VARCHAR2(1000) NOT NULL,   -- 액티비티 도로명주소
    actPRICE     NUMBER(7) NOT NULL,        -- 액티비티 가격
    actGRADE     NUMBER(2, 1) DEFAULT 0.0,  -- 액티비티 평점
    actLIKE      NUMBER(7) DEFAULT 0,       -- 액티비티 좋아요
    actINCLUDE   VARCHAR2(4000) NOT NULL,   -- 액티비티 포함사항
    actEXCLUDE   VARCHAR2(4000) NOT NULL,   -- 액티비티 불포함사항
    actSCHEDULE  VARCHAR2(4000),            -- 액티비티 준비물
    actPOLICY    VARCHAR2(4000) NOT NULL,   -- 액티비티 유의사항
    hID          VARCHAR2(50) NOT NULL,     -- 호스트 아이디
    actDISCOUNT  NUMBER(3) DEFAULT 0,       -- 액티비티 할인율
    actCNO       NUMBER(5),                 -- 액티비티 카테고리 번호
    actMINMEMBER NUMBER(3),                 -- 액티비티 최소참여인원
    actMAXMEMBER NUMBER(3),                 -- 액티비티 최대참여인원
    actOPTION    VARCHAR2(50) NOT NULL,     -- 액티비티 가격 옵션
    PRIMARY KEY(actID),
    FOREIGN KEY(hID) REFERENCES HOST(hID),
    FOREIGN KEY(actCNO) REFERENCES ACTIVITY_CATEGORY(actCNO)
);

CREATE SEQUENCE LIKE_ACTIVITY_SQ -- 액티비티 좋아요 시퀀스
    MAXVALUE 9999999
    NOCYCLE
    NOCACHE;
    
CREATE TABLE LIKE_ACTIVITY( -- 액티비티 좋아요 테이블
    laID NUMBER(7) PRIMARY KEY,
    mID VARCHAR2(50) REFERENCES MEMBER(mID),
    actID NUMBER(7) REFERENCES ACTIVITY(actID),
    laRDATE DATE DEFAULT SYSDATE
);

-- 관심 액티비티 카테고리(a.k.a 액티비티 카테고리 좋아요) 시퀀스
CREATE SEQUENCE LIKE_CATEGORY_SQ MAXVALUE 999 NOCYCLE NOCACHE;

-- 관심 액티비티 카테고리(a.k.a 액티비티 카테고리 좋아요) 액티비티 좋아요 테이블
CREATE TABLE LIKE_CATEGORY(
    lcId NUMBER(3) PRIMARY KEY,
    mID VARCHAR2(50) REFERENCES MEMBER(mID),
    actCNO NUMBER(5) REFERENCES ACTIVITY_CATEGORY(actCNO)
);

CREATE SEQUENCE COUPON_SQ -- 쿠폰 시퀀스
    MAXVALUE 9999999
    NOCYCLE
    NOCACHE;
    
CREATE TABLE COUPON ( -- 쿠폰 테이블
    cID       NUMBER(7),              -- 순차번호
    cCode     VARCHAR2(8) UNIQUE,     -- 쿠폰 일련번호
    cNAME     VARCHAR2(100) NOT NULL, -- 쿠폰 이름
    cDISCOUNT NUMBER(3) DEFAULT 0,    -- 할인율
    cDATE     NUMBER(1) NOT NULL,     -- 쿠폰 유효기간(1: 1개월, 2: 3개월, 3: 6개월, 4: 1년, 5: 무제한(100년)
    PRIMARY KEY(cID)
);

CREATE SEQUENCE MEMBER_COUPON_SQ -- 멤버 쿠폰 시퀀스
    MAXVALUE 9999999
    NOCYCLE
    NOCACHE;
    
CREATE TABLE MEMBER_COUPON ( -- 멤버 쿠폰 테이블
    mcNO   NUMBER(7),           -- 순차번호
    mID    VARCHAR2(50),        -- 멤버아이디
    cID    NUMBER(7),           -- 쿠폰 순차번호
    mcDATE DATE,                -- 유효기간
    mcUSE NUMBER(1) DEFAULT 0,  -- 사용여부
    PRIMARY KEY(mcNO),
    FOREIGN KEY(mID) REFERENCES MEMBER(mID),
    FOREIGN KEY(cID) REFERENCES COUPON(cID)
);

CREATE SEQUENCE ACTIVITY_CATEGORY_SQ -- 액티비티 카테고리 시퀀스
    MAXVALUE 99999
    NOCYCLE
    NOCACHE;

CREATE TABLE ACTIVITY_CATEGORY ( -- 액티비티 카테고리 테이블
    actCNO NUMBER(5),
    actCATEGORY VARCHAR2(50) NOT NULL,
    actCATEGORY2 VARCHAR2(50) NOT NULL,
    actCATEGORY3 VARCHAR2(50) NOT NULL,
    actCATEGORY4 VARCHAR2(50) NOT NULL,
    actCATEGORY5 VARCHAR2(50),
    PRIMARY KEY(actCNO)
);

CREATE SEQUENCE ACTEVENTDATE_SQ -- 액티비티 일정 시퀀스
    MAXVALUE 9999999999
    NOCYCLE
    NOCACHE;

CREATE TABLE ACTEVENTDATE ( -- 액티비티 일정 테이블
    eNO NUMBER(10),
    actSTARTDATE DATE,
    actENDDATE DATE,
    hID VARCHAR2(50) NOT NULL,
    actID NUMBER(7) NOT NULL,
    PRIMARY KEY(eNO),
    FOREIGN KEY(hID) REFERENCES HOST(hID),
    FOREIGN KEY(actID) REFERENCES ACTIVITY(actID)
);

CREATE SEQUENCE REVIEW_SQ -- 후기 시퀀스
    MAXVALUE 9999999
    NOCYCLE
    NOCACHE;
    
CREATE TABLE REVIEW ( -- 후기 테이블
    rID      NUMBER(7),
    rTITLE   VARCHAR2(1000) NOT NULL,
    rWRITER  VARCHAR2(50) NOT NULL,
    rPW      VARCHAR2(50) NOT NULL,
    rCONTENT VARCHAR2(4000) NOT NULL,
    rIMG     VARCHAR2(1000),
    rGROUP   NUMBER(7) NOT NULL,
    rSTEP    NUMBER(7) NOT NULL,
    rINDENT  NUMBER(3) NOT NULL,
    rGRADE   NUMBER(1) DEFAULT 0,
    actID    NUMBER(7) NOT NULL,
    rLIKE    NUMBER(7) DEFAULT 0,
    rDATE    DATE DEFAULT SYSDATE,
    mID      VARCHAR2(50),
    hID      VARCHAR2(50),
    PRIMARY KEY(rID),
    FOREIGN KEY(actID) REFERENCES ACTIVITY(actID),
    FOREIGN KEY(mID) REFERENCES MEMBER(mID),
    FOREIGN KEY(hID) REFERENCES HOST(hID)
);

CREATE SEQUENCE REVIEW_LIKE_SQ -- 후기 좋아요 시퀀스
    MAXVALUE 9999999
    NOCYCLE
    NOCACHE;

CREATE TABLE REVIEW_LIKE ( -- 후기 좋아요 테이블
    rlNO    NUMBER(7),
    rID     NUMBER(7),
    mID     VARCHAR2(50),
    rlCHECK NUMBER(1) DEFAULT 1,
    actID   NUMBER(7),
    PRIMARY KEY(rlNO),
    FOREIGN KEY(rID) REFERENCES REVIEW(rID),
    FOREIGN KEY(mID) REFERENCES MEMBER(mID),
    FOREIGN KEY(actID) REFERENCES ACTIVITY(actID)
);

CREATE SEQUENCE ORDERS_SQ -- 예약 시퀀스
    MAXVALUE 9999999999
    NOCYCLE
    NOCACHE;

CREATE TABLE ORDERS ( -- 예약 테이블
    oNO    NUMBER(10),
    actID  NUMBER(7),
    cID    NUMBER(7),
    oPRICE NUMBER(8),
    mID    VARCHAR2(50),
    PRIMARY KEY(oNO),
    FOREIGN KEY(actID) REFERENCES ACTIVITY(actID),
    FOREIGN KEY(mID) REFERENCES MEMBER(mID),
    FOREIGN KEY(cID) REFERENCES COUPON(cID)
);

CREATE SEQUENCE ACTIVITY_RESERVE_SQ -- 액티비티 예약 시퀀스
    MAXVALUE 9999999999
    NOCYCLE
    NOCACHE;

CREATE TABLE ACTIVITY_RESERVE ( -- 액티비티 예약 테이블
    arID        NUMBER(10),
    hID         VARCHAR2(50) NOT NULL,
    mID         VARCHAR2(50) NOT NULL,
    actID       NUMBER(7) NOT NULL,
    eNO         NUMBER(10) NOT NULL,
    arCHECK     NUMBER(1) DEFAULT 0,
    arRDATE     DATE DEFAULT SYSDATE,
    arCHECKDATE DATE DEFAULT SYSDATE,
    PRIMARY KEY(arID),
    FOREIGN KEY(hID) REFERENCES HOST(hID),
    FOREIGN KEY(mID) REFERENCES MEMBER(mID),
    FOREIGN KEY(actID) REFERENCES ACTIVITY(actID),
    FOREIGN KEY(eNO) REFERENCES actEVENTDATE(eNO)
);

CREATE SEQUENCE NOTICE_SQ -- 공지 시퀀스
    MAXVALUE 9999999
    NOCYCLE
    NOCACHE;

CREATE TABLE NOTICE ( -- 공지 테이블
    nID      NUMBER(7),
    nPW      VARCHAR2(50) NOT NULL,
    nTYPE    VARCHAR2(50) NOT NULL,
    nTITLE   VARCHAR2(100) NOT NULL,
    nCONTENT CLOB NOT NULL,
    nRDATE   DATE DEFAULT SYSDATE NOT NULL,
    aID      VARCHAR2(50) NOT NULL,
    PRIMARY KEY(nID),
    FOREIGN KEY(aID) REFERENCES ADMIN(aID)
);